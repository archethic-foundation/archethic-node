<div class="body">
  <div class="text_title">Code source viewer</div>
  <div class="text_subtitle">
    Explore the code of the node.
  </div>
  <div class="ae-box ae-purple shadow">
    <nav class="level">
      <div class="level-left">
        <div class="level-item">
          <%= link class: "simple-button", to: Routes.code_path(@socket, :download) do %>
            <svg
              fill="white"
              width="32"
              height="32"
              version="1.1"
              id="Capa_1"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              viewBox="0 0 471.2 471.2"
              xml:space="preserve"
            >
              <g>
                <g>
                  <path d="M457.7,230.15c-7.5,0-13.5,6-13.5,13.5v122.8c0,33.4-27.2,60.5-60.5,60.5H87.5c-33.4,0-60.5-27.2-60.5-60.5v-124.8
			c0-7.5-6-13.5-13.5-13.5s-13.5,6-13.5,13.5v124.8c0,48.3,39.3,87.5,87.5,87.5h296.2c48.3,0,87.5-39.3,87.5-87.5v-122.8
			C471.2,236.25,465.2,230.15,457.7,230.15z" />
                  <path d="M226.1,346.75c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4l85.8-85.8c5.3-5.3,5.3-13.8,0-19.1c-5.3-5.3-13.8-5.3-19.1,0l-62.7,62.8
			V30.75c0-7.5-6-13.5-13.5-13.5s-13.5,6-13.5,13.5v273.9l-62.8-62.8c-5.3-5.3-13.8-5.3-19.1,0c-5.3,5.3-5.3,13.8,0,19.1
			L226.1,346.75z" />
                </g>
              </g>
            </svg>
            <span>Download code</span>
          <% end %>
        </div>
        <div class="level-item">
          <%= link class: "simple-button", to: "https://github.com/archethic-foundation/archethic-node" do %>
            <svg
              width="32"
              height="32"
              viewBox="0 0 32 32"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_409_4716)">
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M15.9947 -0.0166016C12.1963 -0.0146308 8.52235 1.33071 5.62994 3.77885C2.73752 6.22699 0.815201 9.61831 0.206709 13.3464C-0.401784 17.0744 0.343222 20.8962 2.30853 24.1282C4.27383 27.3602 7.33127 29.7918 10.9341 30.9881C11.729 31.1356 12.0284 30.643 12.0284 30.2241C12.0284 29.8052 12.0125 28.5908 12.0072 27.263C7.55602 28.2246 6.61545 25.3846 6.61545 25.3846C5.88948 23.5405 4.84027 23.0558 4.84027 23.0558C3.38834 22.0705 4.94891 22.089 4.94891 22.089C6.55716 22.2022 7.40236 23.7302 7.40236 23.7302C8.8278 26.1618 11.1461 25.4584 12.0575 25.0474C12.2006 24.0174 12.6166 23.3166 13.0749 22.9188C9.51931 22.5184 5.7835 21.1537 5.7835 15.0576C5.76146 13.4767 6.35149 11.9477 7.4315 10.7872C7.26723 10.3868 6.71877 8.76925 7.58781 6.57213C7.58781 6.57213 8.93112 6.14535 11.9887 8.20285C14.6112 7.48974 17.3782 7.48974 20.0008 8.20285C23.0556 6.14535 24.3963 6.57213 24.3963 6.57213C25.268 8.76398 24.7195 10.3815 24.5553 10.7872C25.6387 11.9479 26.23 13.4795 26.2059 15.0629C26.2059 21.1722 22.4622 22.5184 18.9012 22.9109C19.4735 23.4062 19.9849 24.373 19.9849 25.8588C19.9849 27.9875 19.9663 29.6999 19.9663 30.2241C19.9663 30.6482 20.2551 31.1435 21.0659 30.9881C24.6692 29.7916 27.7269 27.3596 29.6922 24.1271C31.6574 20.8945 32.4021 17.0722 31.7929 13.3438C31.1837 9.61536 29.2604 6.22402 26.367 3.77629C23.4737 1.32857 19.7989 -0.01588 16 -0.0166016H15.9947Z"
                  fill="currentColor"
                >
                </path>
                <path
                  d="M6.05421 22.8262C6.01977 22.9053 5.89259 22.929 5.78926 22.8737C5.68593 22.8183 5.6091 22.7156 5.64619 22.6339C5.68329 22.5523 5.80781 22.5312 5.91114 22.5865C6.01448 22.6418 6.09395 22.7472 6.05421 22.8262Z"
                  fill="currentColor"
                >
                </path>
                <path
                  d="M6.70311 23.5453C6.64824 23.5727 6.58546 23.5804 6.52553 23.567C6.4656 23.5535 6.41224 23.5198 6.37457 23.4715C6.27124 23.3608 6.25003 23.2081 6.32952 23.1396C6.409 23.0711 6.55209 23.1027 6.65542 23.2133C6.75875 23.324 6.78259 23.4768 6.70311 23.5453Z"
                  fill="currentColor"
                >
                </path>
                <path
                  d="M7.3294 24.4601C7.23137 24.5286 7.06444 24.4601 6.97171 24.3231C6.94607 24.2985 6.92568 24.2691 6.91174 24.2365C6.89781 24.2039 6.89062 24.1688 6.89062 24.1334C6.89062 24.098 6.89781 24.063 6.91174 24.0304C6.92568 23.9978 6.94607 23.9683 6.97171 23.9438C7.06974 23.8779 7.23667 23.9438 7.3294 24.0781C7.42213 24.2125 7.42478 24.3916 7.3294 24.4601Z"
                  fill="currentColor"
                >
                </path>
                <path
                  d="M8.19158 25.3454C8.10414 25.4429 7.92663 25.4165 7.78091 25.2848C7.63519 25.1531 7.60073 24.9739 7.68817 24.8791C7.7756 24.7842 7.95312 24.8106 8.10414 24.9397C8.25516 25.0688 8.28431 25.2505 8.19158 25.3454Z"
                  fill="currentColor"
                >
                </path>
                <path
                  d="M9.38971 25.8609C9.34996 25.9847 9.16979 26.0401 8.98963 25.9874C8.80946 25.9347 8.69023 25.7872 8.72468 25.6607C8.75912 25.5343 8.94194 25.4763 9.12476 25.5343C9.30757 25.5922 9.42415 25.7318 9.38971 25.8609Z"
                  fill="currentColor"
                >
                </path>
                <path
                  d="M10.7018 25.9506C10.7018 26.0797 10.5535 26.1904 10.3627 26.193C10.1719 26.1956 10.0156 26.0903 10.0156 25.9612C10.0156 25.8321 10.164 25.7214 10.3548 25.7188C10.5455 25.7162 10.7018 25.8189 10.7018 25.9506Z"
                  fill="currentColor"
                >
                </path>
                <path
                  d="M11.918 25.7483C11.9418 25.8774 11.8094 26.0117 11.6186 26.0433C11.4278 26.0749 11.2609 25.9985 11.2371 25.8721C11.2132 25.7456 11.351 25.6087 11.5365 25.5744C11.7219 25.5402 11.8941 25.6192 11.918 25.7483Z"
                  fill="currentColor"
                >
                </path>
              </g>
              <defs>
                <clipPath id="clip0_409_4716">
                  <rect width="32" height="32" fill="currentColor"></rect>
                </clipPath>
              </defs>
            </svg>
            <span>
              Github
            </span>
          <% end %>
        </div>
      </div>
    </nav>

    <div class="columns">
      <div class="column is-3-desktop">
        <aside class="menu">
          <ul class="menu-list">
            <%= render_tree(@tree, @expanded_folders) %>
          </ul>
        </aside>
      </div>

      <div class="column">
        <%= if @details != nil do %>
          <div class="text_subtitle"><%= @details.filename %></div>
          <pre style="width: 100%" phx-hook="CodeViewer" id="code_viewer">
            <code class={@details.language}>
                <%= @details.content %>
            </code>
        </pre>
        <% end %>
      </div>
    </div>
  </div>
</div>
